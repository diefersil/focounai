!function(e){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.image_select=redux.field_objects.image_select||{},redux.field_objects.image_select.init=function(t){t=e.redux.getSelector(t,"image_select"),e(t).each((function(){var t=e(this),i=t;t.hasClass("redux-field-container")||(i=t.parents(".redux-field-container:first")),i.is(":hidden")||i.hasClass("redux-field-init")&&(i.removeClass("redux-field-init"),t.find(".redux-image-select label img, .redux-image-select label .tiles").on("click",(function(i){var s,l,a,r,d=e(this).closest("label").attr("for");if(e(this).parents("fieldset:first").find(".redux-image-select-selected").removeClass("redux-image-select-selected").find('input[type="radio"]').prop("checked",!1),e(this).closest("label").find('input[type="radio"]').prop("checked"),e(this).closest("label").hasClass("redux-image-select-preset-"+d))return i.preventDefault(),s=e(this).closest("label").find("input"),l=s.data("presets"),null!=(a=s.data("merge"))&&("string"===e.type(a)&&(a=a.split("|")),e.each(l,(function(t){"object"!==e.type(redux.optName.options[t])||!0!==a&&-1===e.inArray(t,a)||(l[t]=e.extend(redux.optName.options[t],l[t]))}))),null!=s&&(t.find('label[for="'+d+'"]').addClass("redux-image-select-selected").find('input[type="radio"]').attr("checked",!0),window.onbeforeunload=null,0===(r=e('textarea[name="'+redux.optName.args.opt_name+'[import_code]"')).length?e(this).append('<textarea id="import-code-value" style="display:none;" name="'+redux.optName.args.opt_name+'[import_code]">'+JSON.stringify(l)+"</textarea>"):r.val(JSON.stringify(l)),0!==e("#publishing-action #publish").length?e("#publish").click():e("#redux-import").click()),!1;t.find('label[for="'+d+'"]').addClass("redux-image-select-selected").find('input[type="radio"]').prop("checked",!0).trigger("change"),redux_change(e(this).closest("label").find('input[type="radio"]'))})),t.find(".tiles").qtip({content:{text:function(){return'<img src="'+e(this).attr("rel")+'" style="max-width:150px;" alt=" />'}},style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}}))}))}}(jQuery);